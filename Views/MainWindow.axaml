<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:models="using:GcpvLynx.Models"
        x:Class="GcpvLynx.Views.MainWindow"
        Title="GcpvLynx - File Selection"
        Width="800"
        Height="700"
        MinWidth="600"
        MinHeight="500"
        WindowStartupLocation="CenterScreen">
  
  <Window.Styles>
    <Style Selector="Button">
      <Setter Property="Template">
        <ControlTemplate>
          <Border Name="PART_Border"
                  Background="{TemplateBinding Background}"
                  BorderBrush="{TemplateBinding BorderBrush}"
                  BorderThickness="0"
                  CornerRadius="4"
                  Padding="8,4">
            <ContentPresenter Name="PART_ContentPresenter"
                              Content="{TemplateBinding Content}"
                              ContentTemplate="{TemplateBinding ContentTemplate}"
                              Foreground="{TemplateBinding Foreground}"
                              HorizontalAlignment="Center"
                              VerticalAlignment="Center"
                              Margin="{TemplateBinding Padding}"/>
          </Border>
        </ControlTemplate>
      </Setter>
      <Setter Property="BorderThickness" Value="0"/>
      <Setter Property="CornerRadius" Value="4"/>
      <Setter Property="FontWeight" Value="Medium"/>
      <Setter Property="Cursor" Value="Hand"/>
      <Setter Property="MinHeight" Value="24"/>
      <Setter Property="FontSize" Value="11"/>
    </Style>
    
    <Style Selector="Button:pointerover /template/ Border#PART_Border">
      <Setter Property="Opacity" Value="0.8"/>
    </Style>
    
    <Style Selector="Button:pressed /template/ Border#PART_Border">
      <Setter Property="Opacity" Value="0.6"/>
    </Style>
    
    <Style Selector="ComboBox">
      <Setter Property="Background" Value="#FFFFFF"/>
      <Setter Property="Foreground" Value="#1F2937"/>
      <Setter Property="BorderBrush" Value="#D1D5DB"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="CornerRadius" Value="4"/>
    </Style>
    
    <Style Selector="ComboBox:pointerover">
      <Setter Property="BorderBrush" Value="#9CA3AF"/>
    </Style>
    
    <Style Selector="ComboBox:pointerover /template/ Border#PART_DropdownButton">
      <Setter Property="Background" Value="#F3F4F6"/>
    </Style>
    
    <Style Selector="ComboBox:focus">
      <Setter Property="BorderBrush" Value="#3B82F6"/>
    </Style>
  </Window.Styles>

  <ScrollViewer Background="#F5F5F5">
    <StackPanel Margin="20" Spacing="20">
      
      <!-- Header -->
      <TextBlock Text="GcpvLynx File Selection" 
                 FontSize="18" 
                 FontWeight="Bold" 
                 HorizontalAlignment="Center" 
                 Foreground="#2C3E50" />
      
      <TextBlock Text="Select the required files to begin processing" 
                 FontSize="12" 
                 HorizontalAlignment="Center" 
                 Foreground="#7F8C8D" />

      <!-- GCPV Export CSV File Selection -->
      <Border Background="#FFFFFF" 
              CornerRadius="6" 
              Padding="16" 
              BorderBrush="#D1D5DB"
              BorderThickness="1"
              BoxShadow="0 1 3 0 #1A000000">
        <StackPanel Spacing="8">
          <TextBlock Text="GCPV Export CSV File" 
                     FontSize="14" 
                     FontWeight="SemiBold" 
                     Foreground="#1F2937" />
          
          <TextBlock Text="Select the GCPV Export CSV file to process" 
                     FontSize="11" 
                     Foreground="#6B7280" />
          
          <Button Name="GcpvFileButton"
                  Content="Browse for GCPV CSV File" 
                  Click="OnGcpvFileClicked"
                  Background="#3B82F6"
                  Foreground="White" />
          
          <TextBlock Name="GcpvFileLabel"
                     Text="No file selected" 
                     FontSize="10" 
                     Foreground="#6B7280" />
        </StackPanel>
      </Border>

      <!-- FinishLynx EVT File Selection -->
      <Border Background="#FFFFFF" 
              CornerRadius="6" 
              Padding="16" 
              BorderBrush="#D1D5DB"
              BorderThickness="1"
              BoxShadow="0 1 3 0 #1A000000">
        <StackPanel Spacing="8">
          <TextBlock Text="FinishLynx EVT File" 
                     FontSize="14" 
                     FontWeight="SemiBold" 
                     Foreground="#1F2937" />
          
          <TextBlock Text="Select the FinishLynx EVT file to process" 
                     FontSize="11" 
                     Foreground="#6B7280" />
          
          <Button Name="FinishLynxFileButton"
                  Content="Browse for FinishLynx EVT File" 
                  Click="OnFinishLynxFileClicked"
                  Background="#6B7280"
                  Foreground="White" />
          
          <TextBlock Name="FinishLynxFileLabel"
                     Text="No file selected" 
                     FontSize="10" 
                     Foreground="#6B7280" />
        </StackPanel>
      </Border>

      <!-- Action Buttons -->
      <StackPanel Orientation="Horizontal" 
                  HorizontalAlignment="Center" 
                  Spacing="12">
        
        <Button Name="ProcessButton"
                Content="Re-parse CSV File" 
                Click="OnProcessClicked"
                Background="#F59E0B"
                Foreground="White" />
        
        <Button Name="UpdateEvtButton"
                Content="Update EVT File" 
                Click="OnUpdateEvtClicked"
                Background="#10B981"
                Foreground="White" />
        
        <Button Name="CloseButton"
                Content="Close Application" 
                Click="OnCloseClicked"
                Background="#EF4444"
                Foreground="White" />
      </StackPanel>

      <!-- Results Section -->
      <Border Name="ResultsSection"
              Background="#FFFFFF" 
              CornerRadius="6" 
              Padding="16" 
              BorderBrush="#D1D5DB"
              BorderThickness="1"
              BoxShadow="0 1 3 0 #1A000000"
              IsVisible="False">
        <StackPanel Spacing="12">
          <TextBlock Text="Parsed Race Data" 
                     FontSize="16" 
                     FontWeight="SemiBold" 
                     Foreground="#1F2937" />
          
          <!-- Race Selection Dropdown -->
          <StackPanel Orientation="Horizontal" Spacing="8">
            <TextBlock Text="Select Race:" 
                       FontSize="12" 
                       VerticalAlignment="Center" 
                       Foreground="#374151"
                       FontWeight="Medium" />
            <ComboBox Name="RaceSelectionComboBox"
                      Width="300"
                      Height="28"
                      SelectionChanged="OnRaceSelectionChanged"
                      Background="#FFFFFF"
                      BorderBrush="#D1D5DB"
                      Foreground="#1F2937"
                      CornerRadius="4" />
          </StackPanel>
          
          <!-- Race Information -->
          <Border Name="RaceInfoBorder"
                  Background="#F8FAFC" 
                  CornerRadius="4" 
                  Padding="12"
                  BorderBrush="#E5E7EB"
                  BorderThickness="1">
            <StackPanel Name="RaceInfoPanel" Spacing="4">
              <TextBlock Name="RaceInfoText" 
                         Text="Select a race to view details" 
                         FontSize="11" 
                         Foreground="#6B7280" />
            </StackPanel>
          </Border>
          
          <!-- Skaters List -->
          <Border Background="#FFFFFF" 
                  CornerRadius="4" 
                  Padding="16"
                  BorderBrush="#E5E7EB"
                  BorderThickness="1">
            <StackPanel>
              <TextBlock Text="Skaters" 
                         FontSize="14" 
                         FontWeight="SemiBold" 
                         Margin="0,0,0,8" 
                         Foreground="#1F2937" />
              <!-- Column Headers -->
              <Border Background="#F9FAFB" 
                      CornerRadius="1" 
                      Padding="6,4" 
                      Margin="0,0,0,4">
                <Grid>
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="50" />
                    <ColumnDefinition Width="70" />
                    <ColumnDefinition Width="110" />
                    <ColumnDefinition Width="110" />
                    <ColumnDefinition Width="*" />
                  </Grid.ColumnDefinitions>
                  <TextBlock Grid.Column="0" 
                             Text="Lane" 
                             FontWeight="SemiBold" 
                             FontSize="11" 
                             Foreground="#6B7280" />
                  <TextBlock Grid.Column="1" 
                             Text="ID" 
                             FontWeight="SemiBold" 
                             FontSize="11" 
                             Foreground="#6B7280" />
                  <TextBlock Grid.Column="2" 
                             Text="Last Name" 
                             FontWeight="SemiBold" 
                             FontSize="11" 
                             Foreground="#6B7280" />
                  <TextBlock Grid.Column="3" 
                             Text="First Name" 
                             FontWeight="SemiBold" 
                             FontSize="11" 
                             Foreground="#6B7280" />
                  <TextBlock Grid.Column="4" 
                             Text="Club" 
                             FontWeight="SemiBold" 
                             FontSize="11" 
                             Foreground="#6B7280" />
                </Grid>
              </Border>
              
              <ListBox Name="SkatersListBox"
                       MaxHeight="200"
                       ScrollViewer.HorizontalScrollBarVisibility="Auto"
                       ScrollViewer.VerticalScrollBarVisibility="Auto"
                       Background="#FFFFFF"
                       BorderBrush="#E5E7EB"
                       BorderThickness="1"
                       CornerRadius="4">
                <ListBox.ItemTemplate>
                  <DataTemplate x:DataType="models:SkaterData">
                    <Border Background="#FFFFFF" 
                            CornerRadius="1" 
                            Padding="6,3" 
                            Margin="0,0.5"
                            BorderBrush="#F3F4F6"
                            BorderThickness="1">
                      <Grid>
                        <Grid.ColumnDefinitions>
                          <ColumnDefinition Width="50" />
                          <ColumnDefinition Width="70" />
                          <ColumnDefinition Width="110" />
                          <ColumnDefinition Width="110" />
                          <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" 
                                   Text="{Binding Lane}" 
                                   FontWeight="SemiBold" 
                                   FontSize="11"
                                   VerticalAlignment="Center"
                                   Foreground="#1F2937" />
                        <TextBlock Grid.Column="1" 
                                   Text="{Binding SkaterId}" 
                                   FontSize="11"
                                   VerticalAlignment="Center"
                                   Foreground="#374151" />
                        <TextBlock Grid.Column="2" 
                                   Text="{Binding LastName}" 
                                   FontSize="11"
                                   VerticalAlignment="Center"
                                   Foreground="#374151" />
                        <TextBlock Grid.Column="3" 
                                   Text="{Binding FirstName}" 
                                   FontSize="11"
                                   VerticalAlignment="Center"
                                   Foreground="#374151" />
                        <TextBlock Grid.Column="4" 
                                   Text="{Binding Club}" 
                                   FontSize="11"
                                   VerticalAlignment="Center" 
                                   Foreground="#6B7280" />
                      </Grid>
                    </Border>
                  </DataTemplate>
                </ListBox.ItemTemplate>
              </ListBox>
            </StackPanel>
          </Border>
        </StackPanel>
      </Border>

    </StackPanel>
  </ScrollViewer>

</Window>

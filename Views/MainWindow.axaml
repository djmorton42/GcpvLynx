<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:models="using:GcpvLynx.Models"
        x:Class="GcpvLynx.Views.MainWindow"
        Title="GcpvLynx - FinishLynx Importer"
        Width="800"
        Height="700"
        MinWidth="600"
        MinHeight="500"
        WindowStartupLocation="CenterScreen"
        RequestedThemeVariant="Light">
  
  <Window.Styles>
    <Style Selector="Button">
      <Setter Property="Template">
        <ControlTemplate>
          <Border Name="PART_Border"
                  Background="{TemplateBinding Background}"
                  BorderBrush="{TemplateBinding BorderBrush}"
                  BorderThickness="0"
                  CornerRadius="4"
                  Padding="8,4">
            <ContentPresenter Name="PART_ContentPresenter"
                              Content="{TemplateBinding Content}"
                              ContentTemplate="{TemplateBinding ContentTemplate}"
                              Foreground="{TemplateBinding Foreground}"
                              HorizontalAlignment="Center"
                              VerticalAlignment="Center"
                              Margin="{TemplateBinding Padding}"/>
          </Border>
        </ControlTemplate>
      </Setter>
      <Setter Property="BorderThickness" Value="0"/>
      <Setter Property="CornerRadius" Value="4"/>
      <Setter Property="FontWeight" Value="Medium"/>
      <Setter Property="Cursor" Value="Hand"/>
      <Setter Property="MinHeight" Value="24"/>
      <Setter Property="FontSize" Value="11"/>
    </Style>
    
    <Style Selector="Button:pointerover /template/ Border#PART_Border">
      <Setter Property="Opacity" Value="0.8"/>
    </Style>
    
    <Style Selector="Button:pressed /template/ Border#PART_Border">
      <Setter Property="Opacity" Value="0.6"/>
    </Style>
    
    <Style Selector="ComboBox">
      <Setter Property="Background" Value="#FFFFFF"/>
      <Setter Property="Foreground" Value="#1F2937"/>
      <Setter Property="BorderBrush" Value="#D1D5DB"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="CornerRadius" Value="4"/>
    </Style>
    
    <Style Selector="ComboBox:pointerover">
      <Setter Property="BorderBrush" Value="#9CA3AF"/>
    </Style>
    
    <Style Selector="ComboBox:pointerover /template/ Border#PART_DropdownButton">
      <Setter Property="Background" Value="#F3F4F6"/>
    </Style>
    
    <Style Selector="ComboBox:focus">
      <Setter Property="BorderBrush" Value="#3B82F6"/>
    </Style>
    
    <!-- TextBox Styles - Force Light Theme -->
    <Style Selector="TextBox">
      <Setter Property="Background" Value="White"/>
      <Setter Property="Foreground" Value="Black"/>
    </Style>
    
    <Style Selector="TextBox:focus">
      <Setter Property="Background" Value="White"/>
      <Setter Property="Foreground" Value="Black"/>
    </Style>
    
    <Style Selector="TextBox:pointerover">
      <Setter Property="Background" Value="White"/>
      <Setter Property="Foreground" Value="Black"/>
    </Style>
    
    <Style Selector="TextBox:selected">
      <Setter Property="Background" Value="White"/>
      <Setter Property="Foreground" Value="Black"/>
    </Style>
    
  </Window.Styles>

  <ScrollViewer Background="#F5F5F5" PointerPressed="OnBackgroundClicked">
    <StackPanel Margin="20" Spacing="20" PointerPressed="OnBackgroundClicked">
      
      <!-- Header -->
      <TextBlock Text="GcpvLynx - FinishLynx Importer" 
                 FontSize="18" 
                 FontWeight="Bold" 
                 HorizontalAlignment="Center" 
                 Foreground="#2C3E50" />
      
      <TextBlock Text="Select the required files to begin processing" 
                 FontSize="12" 
                 HorizontalAlignment="Center" 
                 Foreground="#7F8C8D" />

      <!-- GCPV Export CSV File Selection -->
      <Border Background="#FFFFFF" 
              CornerRadius="6" 
              Padding="16" 
              BorderBrush="#D1D5DB"
              BorderThickness="1"
              BoxShadow="0 1 3 0 #1A000000">
        <StackPanel Spacing="8">
          <Grid>
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="*" />
              <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            
            <TextBlock Text="GCPV Export CSV File" 
                       FontSize="14" 
                       FontWeight="SemiBold" 
                       Foreground="#1F2937"
                       VerticalAlignment="Center" />
            
            <Button Name="GcpvFileButton"
                    Content="Browse for GCPV CSV File" 
                    Click="OnGcpvFileClicked"
                    Background="#3B82F6"
                    Foreground="White"
                    MinWidth="200"
                    Grid.Column="1" />
          </Grid>
          
          <TextBlock Name="GcpvFileLabel"
                     Text="No file selected" 
                     FontSize="10" 
                     Foreground="#6B7280" />
        </StackPanel>
      </Border>

      <!-- FinishLynx EVT File Selection -->
      <Border Background="#FFFFFF" 
              CornerRadius="6" 
              Padding="16" 
              BorderBrush="#D1D5DB"
              BorderThickness="1"
              BoxShadow="0 1 3 0 #1A000000">
        <StackPanel Spacing="8">
          <Grid>
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="*" />
              <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            
            <TextBlock Text="FinishLynx EVT File" 
                       FontSize="14" 
                       FontWeight="SemiBold" 
                       Foreground="#1F2937"
                       VerticalAlignment="Center" />
            
            <Button Name="FinishLynxFileButton"
                    Content="Browse for FinishLynx EVT File" 
                    Click="OnFinishLynxFileClicked"
                    Background="#3B82F6"
                    Foreground="White"
                    MinWidth="200"
                    Grid.Column="1" />
          </Grid>
          
          <TextBlock Name="FinishLynxFileLabel"
                     Text="No file selected" 
                     FontSize="10" 
                     Foreground="#6B7280" />
        </StackPanel>
      </Border>

      <!-- Lap Override and Action Buttons Side by Side -->
      <StackPanel Orientation="Horizontal" 
                  HorizontalAlignment="Center" 
                  Spacing="16">
        
        <!-- Lap Number Override Section -->
        <Border Background="#FFFFFF" 
                CornerRadius="6" 
                Padding="16" 
                BorderBrush="#D1D5DB"
                BorderThickness="1"
                BoxShadow="0 1 3 0 #FFFFFF00">
          <StackPanel Spacing="8">
            <TextBlock Text="Lap Number Override"
                       Foreground="#1F2937"
                       FontSize="12"
                       HorizontalAlignment="Center" />
            <TextBox Name="LapOverrideTextBox"
                     Watermark="Enter number of laps..."
                     MinWidth="200"
                     HorizontalAlignment="Center"
                     Foreground="Black"
                     Background="White"
                     FontSize="12" />
          </StackPanel>
        </Border>

        <!-- Action Buttons -->
        <Border Background="#FFFFFF" 
                CornerRadius="6" 
                Padding="16" 
                BorderBrush="#D1D5DB"
                BorderThickness="1"
                BoxShadow="0 1 3 0 #1A000000">
          <StackPanel Orientation="Horizontal" 
                      HorizontalAlignment="Center" 
                      Spacing="12">
            <Button Name="ProcessButton"
                    Content="Re-parse CSV File" 
                    Click="OnProcessClicked"
                    Background="#F59E0B"
                    Foreground="White" />
            
            <Button Name="UpdateEvtButton"
                    Content="Update EVT File" 
                    Click="OnUpdateEvtClicked"
                    Background="#10B981"
                    Foreground="White" />
            
            <Button Name="CloseButton"
                    Content="Close Application" 
                    Click="OnCloseClicked"
                    Background="#EF4444"
                    Foreground="White" />
          </StackPanel>
        </Border>
      </StackPanel>

      <!-- Results Section -->
      <Border Name="ResultsSection"
              Background="#FFFFFF" 
              CornerRadius="6" 
              Padding="16" 
              BorderBrush="#D1D5DB"
              BorderThickness="1"
              BoxShadow="0 1 3 0 #1A000000"
              IsVisible="False">
        <StackPanel Spacing="12">
          <TextBlock Text="Parsed Race Data" 
                     FontSize="16" 
                     FontWeight="SemiBold" 
                     Foreground="#1F2937" />
          
          <!-- Race Data Display -->
          <Border Background="#F8FAFC" 
                  CornerRadius="4" 
                  Padding="12"
                  BorderBrush="#E5E7EB"
                  BorderThickness="1">
            <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
              <StackPanel Name="RaceDataPanel" />
            </ScrollViewer>
          </Border>
        </StackPanel>
      </Border>

    </StackPanel>
  </ScrollViewer>

</Window>
